package com.piggy.coffee.k8s;

import org.junit.After;
import org.junit.Before;

import io.fabric8.kubernetes.client.Config;
import io.fabric8.kubernetes.client.ConfigBuilder;
import io.fabric8.kubernetes.client.DefaultKubernetesClient;
import io.fabric8.kubernetes.client.KubernetesClient;

public class ClientTest {
	KubernetesClient client = null;

	@Before
	public void setUp() throws Exception {
		//withCertFile();
		withCertData();
	}

	void withCertFile() {
		String certDir = "D:\\mumu\\note\\cloud\\k8s\\k8s_auth\\";
		Config config = new ConfigBuilder().withMasterUrl("https://192.168.56.101:6443").withNamespace("default")
				.withTrustCerts(true).withCaCertFile(certDir + "k8s-root-ca.pem")
				.withClientCertFile(certDir + "admin.pem").withClientKeyFile(certDir + "admin-key.pem")
				.withOauthToken("aa1d522ad080f2f893ea87252d5d1588").build();
		client = new DefaultKubernetesClient(config);

	}

	void withCertData() {
		Config config = new ConfigBuilder().withMasterUrl("https://124.70.160.236:5443").withNamespace("default")
				.withTrustCerts(true).withCaCertData("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM4akNDQWRxZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFwTVJrd0Z3WURWUVFLRXhCRFEwVWcKVkdWamFHNXZiRzluYVdWek1Rd3dDZ1lEVlFRREV3TkRRMFV3SUJjTk1qQXdPREkzTURFeE5ERTJXaGdQTWpBMQpNREE0TWpBd01URTBNVFphTUNreEdUQVhCZ05WQkFvVEVFTkRSU0JVWldOb2JtOXNiMmRwWlhNeEREQUtCZ05WCkJBTVRBME5EUlRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTDBlQmxQNGc4eDIKVXpEKzlENjhiOG5YVzlSZWdPb2Z6ZzhnSEM2ZHVTS1h0OWl0anl0UkRMbE5IbERkMkdjd3hXRzljOU91MnE0aAp0TWgya2lsdllrSFAwUG9BWElzZTZaQmlORHZXdHRBdXNKa2E4WTB1RXcrdHQ3dFI4Umh5TER3RkdoeFU0TGtYCjdmcnFIYmlxOHdDTU5OdTllRElYZDVVOGlPelJzRkVYRlJ3NXZyZEl1MFdHUjRXQkc1U29CalQ4L0drVW95QzcKdVF2MjlWT2s2NStWQlB4TVFSQ2NVTG5mUmNCbHpZVzdwVVM4dVVqYTl1cmhsc2FlMC94ekRiSm00T1JtdFdpZQpLbkRYdGFnQTVoNlhTelM0bTBnQUgzTVBNTUNkY2QrMHo0UkM0Q1ZHeitnelA0ZFFZSTJrckUwS3gvSTFVTy9QCm5WMWd1LzFSeGRVQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCL3dRRk1BTUIKQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFKNzc5SnhHd2s5cVRpRCtPQXZhUzd4bXFGbWF1N1h6QTM4eApOV1cxUVd4VTB5c3Y0WWtsSVZhbEFTcFN1MG5tWitlQm5HWDhnNGYyVXdJTEFadkF2QzdRdFdCWmdWTGlhSFZtCmtuZ3VyUHNmMHpCOVdjdEt0Q2JiVHZGZ2Y4VEluZ0xIRGpsaTY1eVB5UlI0WXpQTnR6YnNoQ2xZOFU1TDFpRm0KbkpCUzQ3MGUvMGVGbXVCRXFzbDhMMHZnczE0Y3NYeG5wVDlBcVBEckNDS0FlVDhzcjZ1MEtobjVneVBtbEV3MApNdFk4dlhEeEdMZXk4QVQxVFdpOU5YMFA5bHR3VjhMZDMxUVdkK2Jmdjl1aDVDUkhYTXd5WllpUTZhejh2bkNNCkhVUm5kU0FGc3dvSlVsa2MxTXFUdTg1UXZQczhqTjE2TUtJQldnMEJpdUFsL3NPb2tUST0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo")
				.withClientCertData("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVEekNDQXZlZ0F3SUJBZ0lJRXRJejZRNzBURm93RFFZSktvWklodmNOQVFFTEJRQXdLVEVaTUJjR0ExVUUKQ2hNUVEwTkZJRlJsWTJodWIyeHZaMmxsY3pFTU1Bb0dBMVVFQXhNRFEwTkZNQ0FYRFRJd01EZ3lOekF4TVRReApObG9ZRHpJd05UQXdPREl3TURFeE5ERTVXakF5TVJjd0ZRWURWUVFLRXc1emVYTjBaVzA2YldGemRHVnljekVYCk1CVUdBMVVFQXhNT2MzbHpkR1Z0T20xaGMzUmxjbk13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXcKZ2dFS0FvSUJBUUM5SGdaVCtJUE1kbE13L3ZRK3ZHL0oxMXZVWG9EcUg4NFBJQnd1bmJraWw3ZllyWThyVVF5NQpUUjVRM2Robk1NVmh2WFBUcnRxdUliVElkcElwYjJKQno5RDZBRnlMSHVtUVlqUTcxcmJRTHJDWkd2R05MaE1QCnJiZTdVZkVZY2l3OEJSb2NWT0M1RiszNjZoMjRxdk1BakRUYnZYZ3lGM2VWUElqczBiQlJGeFVjT2I2M1NMdEYKaGtlRmdSdVVxQVkwL1B4cEZLTWd1N2tMOXZWVHBPdWZsUVQ4VEVFUW5GQzUzMFhBWmMyRnU2VkV2TGxJMnZicQo0WmJHbnRQOGN3MnladURrWnJWb25pcHcxN1dvQU9ZZWwwczB1SnRJQUI5ekR6REFuWEhmdE0rRVF1QWxScy9vCk16K0hVR0NOcEt4TkNzZnlOVkR2ejUxZFlMdjlVY1hWQWdNQkFBR2pnZ0V1TUlJQktqQU9CZ05WSFE4QkFmOEUKQkFNQ0JhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CTUlINEJnTlZIUkVFZ2ZBdwpnZTJDRm10MVltVnlibVYwWlhNdVpHVm1ZWFZzZEM1emRtT0NKR3QxWW1WeWJtVjBaWE11WkdWbVlYVnNkQzV6CmRtTXVZMngxYzNSbGNpNXNiMk5oYklJU2EzVmlaWEp1WlhSbGN5NWtaV1poZFd4MGdncHJkV0psY201bGRHVnoKZ2lkcGMzUnBieTF6YVdSbFkyRnlMV2x1YW1WamRHOXlMbWx6ZEdsdkxYTjVjM1JsYlM1emRtT0hFUDBBRWpRQQpBQUFBQUFBQUFBQUFBQUdIQkg4QUFBR0hCQXIzQUFLSEJBcjNBQUdIQkdSbWRGK0hCS3dRY2VhSEJHUkViTHlICkJLd1FjVm1IQkdScHlXT0hCS3dRY1NLSEJNQ29BTlNIQk1Db0FNMkhCTUNvQUNHSEJLbitId0tIQk1Db0FCd3cKRFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUpxbjAvT1EvZ2NFcm44Y08wcW45eGdqaURvM21QamdpdmxZTmpOVgpSRE9WdDJzTkdvNTMxNTllRm80eXFXMUt1U0oxNENZQms0YitNcVJKL2s0dkJ5YUsrMmh3dmVUNTd1VDVDWWNTCmJRbi9lalhwRGpTSEVBRmlKbmNCZkpEMHI1bUxZUURXYy9uK0JINC9GWFQ4bUVDaXBGNWNYUVZ3NzZsSis5V0wKZzRBWDdLVWNEZTdyYnhlMUl6eFF1bVhuaDZBRi80a20raHFzeWttbURQUEJvRlhycU9TSDlFeHFqdnlTYXBwRAp1ajdXWmdLeUM2TGhGN28wcFBNZXVyNytQdzFkL1FuZWZvcU4xZ29ERUR3VHZmYUNIUGE0dXFCM0VXV1NQWG8zCndabVZRdTZDTlZsNXh2Umo1S1owTnJPeEdFb2QyUUlGbEJ3ekc0cmlObG5HVEI4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg")
				.withClientKeyData("LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdlI0R1UvaUR6SFpUTVA3MFByeHZ5ZGRiMUY2QTZoL09EeUFjTHAyNUlwZTMySzJQCksxRU11VTBlVU4zWVp6REZZYjF6MDY3YXJpRzB5SGFTS1c5aVFjL1ErZ0JjaXg3cGtHSTBPOWEyMEM2d21ScngKalM0VEQ2MjN1MUh4R0hJc1BBVWFIRlRndVJmdCt1b2R1S3J6QUl3MDI3MTRNaGQzbFR5STdOR3dVUmNWSERtKwp0MGk3UllaSGhZRWJsS2dHTlB6OGFSU2pJTHU1Qy9iMVU2VHJuNVVFL0V4QkVKeFF1ZDlGd0dYTmhidWxSTHk1ClNOcjI2dUdXeHA3VC9ITU5zbWJnNUdhMWFKNHFjTmUxcUFEbUhwZExOTGliU0FBZmN3OHd3SjF4MzdUUGhFTGcKSlViUDZETS9oMUJnamFTc1RRckg4alZRNzgrZFhXQzcvVkhGMVFJREFRQUJBb0lCQVFDT2Q3NzJwVUhNMXRySApEMW82cE1SbVBzbmNDN0Y4THFlUjkzT2pub2dveWpqaWo2VktVWTJQVHN4bXlTbE1XNDVtbWsxV2krUUx5REtqCnpjZEFWYnVrcm9UVXdVNzJNenhxMjhCVHorWDZvU0hDeFd4eEdlT2NMUmM3azNoWUhUSzdxSEJLSlpzQmRVaC8KZkwwVk1CdE9MMUZtdEs2R3RlME5UUVF0dTYzaTkzNXVyYmJnWmEydmtuQ1VCd1pwNXFmejN1UkRKN2J4dDdSTQo4MDBpNWY4cTBjSTdWQzVmcjdieUVrR0RlUWgxK0hNWTB0b0NQNWZDaTZSQUtpNGdxd1dYdmFOcmZrSW5pSFo0CmsvajZMT3k1aXJiMEplMDJSS2ZrWElZMVVIYzlKZ0JGT3pyNDMwa1puQU9uTmI3djFLUFo5TEdmdlM5QTVjOE8KZW1ZaUZwMkZBb0dCQU1jVDRIV1oya3lxZ2c5MG10dXZGWU1oRmxWYTNmUU1jMXdhenlQQTFEalIybVVFL0hBVAprMW93M0M3Y1pPVU4zMFB2TnhKdWh1TWplS0FnUjhRalRPUlNUOFp6UlhrZ1M4czBOb2RjK0pKZWpEMjNBK3d4CnRMMHJTdENXSEVnTzFyeG1rUk5Sa29SWG00ZEEzUmtZSERGK2h6Z2o1N0NlZmhoQTBVUzRoeEd6QW9HQkFQTXgKRVUvTnAxcm1mZlpWNnJqZnJuaTNCTTNSNzNncy8wN3Bua2VyMS9rVnp5eDFuSW5mcVFSMnZsTTJPbVJTbGE4MgovZUNjVUt6N0pXcWlUY0lTRVFwenJja0YwcnBNM0Y4b3FnZDF5NjVrQ0w5MWozZTVMeGovVlJ1bmlGSS9ROVVvCkRxVlI5cHFpaXhlcFdmQXEvMlR0VjZ2REsrbHpJRFZyRS9kU0ZUWlhBb0dBSFA5T01KTUtjeVJhOFhsZ25TTXgKbFBvYTBLLzlxSEN2MVBpcXQyQjlDUkc0S0FMRDZtZFBqVkdVb05iRmMzL0R4NWR1aENiSlN3aDlwNFZNTHN1ZApoWnhmdGw1UC9rYXdBNWRGWWc0dXZ0TTZ4anFFUGNFM3ZGNHo5WklINkk4UXhEeUVZVFgraTN4ZlVTSW5rbUlxCnFTTHUrMFJ2bVJCYytaZG5aQVVrMTNVQ2dZRUE2OEpQMUJ1OCtHU25ESjV5Tk5PMFlwYWE4NlZvRUFzZlh6TWcKSEw4OVd0Nkh2OFF0QTRSdWFFTnRjMklJN2FVYU00aU9TcWQvbHBMS3pUdVhRbU1kWGhLVEVXU3h5NllqcGFUWQpZTzhUakhheC9GcE53WFVuY1labXphNTJlN1dWWHhtOFNRelNrMHFzcVQybVVTeDk5eXdZYUEySGpvUHJYNTMwCjl6aitFM1VDZ1lBQ2N1WHJ4MHFjblROanJCUTFCN2dTYUtGeEs0eHBaeFlxMXlEZXJ4SHpJRlF4ZUI1aUNQV0MKQnVuLzNEczRuU3NTa2hIQkJDckQrUDU2UW1hQnNjR2IySSt5c05uck9KWEYxMHNQenBzczlRK3p0bEVUNmFsaAo3QlE1TVpOclV6T0dmKy9saWhHN25uN3ZGWDduU1MwMG5pWHVpWWQzSEVyRVI1SEdpcHBvUEE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo").build();
		client = new DefaultKubernetesClient(config);
	}

	@After
	public void tearDown() throws Exception {
		client.close();
	}

}
